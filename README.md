# Задание

Разработать инструмент командной строки для учебного конфигурационного  
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из  
входного формата в выходной. Синтаксические ошибки выявляются с выдачей  
сообщений.

Входной текст на учебном конфигурационном языке принимается из  
файла, путь к которому задан ключом командной строки. Выходной текст на  
языке json попадает в файл, путь к которому задан ключом командной строки.

Однострочные комментарии:
```
* Это однострочный комментарий
```

Массивы:
```
[ значение, значение, значение, ... ]
```

Словари:
```
table(
    имя => значение,
    имя => значение,
    ...
)
```

Имена:
```
[a-z][a-z0-9_]*
```

Значения:
- Числа.
- Строки.
- Массивы.
- Словари.

Строки:
```
"Это строка"
```

Объявление константы на этапе трансляции:
```
const имя = значение;
```

Вычисление константы на этапе трансляции:
```
|имя|
```
Результатом вычисления константного выражения является значение.

Все конструкции учебного конфигурационного языка (с учетом их  
возможной вложенности) должны быть покрыты тестами.

Необходимо показать 2 примера описания конфигураций из разных предметных областей.

---

## Описание проекта

Данный проект представляет собой инструмент командной строки для работы с учебным конфигурационным языком, преобразующим входные данные в формат JSON. Проект поддерживает комментарии, объявления констант, массивы, словари, строки, числа и вычисления констант на этапе трансляции. При возникновении синтаксических ошибок выводятся сообщения об ошибках.

## Структура проекта

```
.
├── config_parser.py      # Скрипт парсера и CLI-инструмента
├── input_config1.txt     # Пример 1 входного файла (конфигурация базы данных)
├── input_config2.txt     # Пример 2 входного файла (конфигурация сети)
└── output.json           # Пример выходного JSON-файла
```

## Основной функционал

- **Парсинг входного файла**:  
  Чтение учебного конфигурационного языка, удаление комментариев, анализ синтаксиса.
  
- **Поддерживаемые конструкции**:  
  - Однострочные комментарии, начинающиеся со `*`.
  - Массивы в квадратных скобках: `[ ... ]`.
  - Словари в формате `table( имя => значение, ... )`.
  - Числа, строки в двойных кавычках.
  - Константы, объявляемые через `const имя = значение;`.
  - Вычисление констант через `|имя|`.
  
- **Выходные данные**:  
  Результат преобразования – валидный JSON, который сохраняется в указанный выходной файл.

- **Синтаксическая валидация**:  
  Если в ходе парсинга обнаружены ошибки (неправильные пары ключ/значение, некорректный синтаксис массива или словаря), программа сообщает об ошибках и прекращает обработку.

## Пример запуска

```bash
python3 config_parser.py -i input_config1.txt -o output.json
```

После успешного запуска в `output.json` будет находиться результат в формате JSON.

## Примеры входных файлов

1. **input_config1.txt** – Конфигурация базы данных:
   ```  
   const db_name = "main_db";
   const max_connections = 100;
   
   // Описание базы данных
   table(
       name => |db_name|,
       settings => table(
           connections => |max_connections|,
           timeout => 30
       )
   )
   ```
   Результат в JSON:
   ```json
   [
       {
           "name": "main_db",
           "settings": {
               "connections": 100,
               "timeout": 30
           }
       }
   ]
   ```

2. **input_config2.txt** – Конфигурация сети:
   ```
   const network_name = "LAN";
   const devices = ["Router", "Switch", "PC"];
   
   // Описание сети
   table(
       name => |network_name|,
       devices => |devices|
   )
   ```
   Это генерирует JSON с именем сети и списком устройств.

## Тестирование

Все конструкции языка, включая вложенные структуры, должны быть покрыты тестами.  
Для запуска тестов (при наличии тестового набора) используйте:

```bash
python3 -m unittest discover tests
```

## Автор

Автор: *Nedavi*